<div class="row mb-5 mt-1">
  <div class="offset-3 col-4">
    <button [routerLink]="['/']"  class="btn btn-primary my-red-background">Retour</button>
  </div>
</div>
<div class="row mt-5">
  <div class="col-8 offset-4" style="text-align: center;">
    <table border=1>
      <tr>
        <th>Nom</th>
        <th>Prénom</th>
        <th>Description</th>
        <th>Action</th>
      </tr>
      <tr *ngFor="let consultant of consultants ">
        <td><a>{{consultant?.lastName | uppercase}}</a></td>
        <td><a>{{consultant?.name }}</a></td>
        <td><a>{{consultant?.description}}</a></td>
        <td>
          <button (click)="isEditing(consultant)" type="button" class="btn btn-outline-dark"><i class="fas fa-plus-square"></i></button>
          <button (click)="delete(consultant.id)" type="button" class="btn btn-outline-dark"><i class="far fa-trash-alt"></i></button>
        </td>
      </tr>
    </table>
  </div>
</div>
<div class="row mt-5 mb-3">
  <div class="col-4 offset-5">
    <button (click)="toggleForm()" class="btn btn-primary my-red-background">Créer un consultant</button>
  </div>
</div>
<div *ngIf="isVisible" class="row mt-5">
  <div class="col-5 offset-4">
    <form (ngSubmit)="register()" [formGroup]="consultantForm">
      <div class="row">
        <div class="col-2 mr-1">
          <label>Name</label>
        </div>
        <div class="col-6">
          <input formControlName="name">
        </div>
      </div>
      <div class="my-text-yellow" *ngIf="nameCtrl.dirty && nameCtrl.hasError('required')"><strong>Consultant name is required</strong></div>
      <div class="my-text-yellow" *ngIf="nameCtrl.dirty && nameCtrl.hasError('minlength')"><strong>Consultant name can't be less than 3 characters</strong></div>
      <div class="my-text-yellow" *ngIf="nameCtrl.dirty && nameCtrl.hasError('maxlength')"><strong>Consultant name can't be more than 20 characters</strong></div>
      <div class="row">
        <div class="col-2 mr-1">
          <label>Lastname</label>
        </div>
        <div class="col-6">
          <input formControlName="lastName">
        </div>
      </div>
      <div class="my-text-yellow" *ngIf="lastNameCtrl.dirty && lastNameCtrl.hasError('required')"><strong>Lastname is required</strong></div>
      <div class="my-text-yellow" *ngIf="lastNameCtrl.dirty && lastNameCtrl.hasError('minlength')"><strong>Lastname can't be less than 3 characters</strong></div>
      <div class="my-text-yellow" *ngIf="lastNameCtrl.dirty && lastNameCtrl.hasError('maxlength')"><strong>Lastname can't be more than 20 characters</strong></div>
      <div class="row">
        <div class="col-2 mr-1">
          <label>Description</label>
        </div>
        <div class="col-6">
          <textarea formControlName="description"></textarea>
        </div>
      </div>
      <div class="my-text-yellow" *ngIf="descriptionCtrl.dirty && descriptionCtrl.hasError('required')"><strong>Description is required</strong></div>
      <div class="my-text-yellow" *ngIf="descriptionCtrl.dirty && descriptionCtrl.hasError('maxlength')"><strong>Description can't be more than 250 characters</strong></div>
      <div class="row mt-3 mb-3">
        <div class="col-4 offset-4">
          <button [disabled]="consultantForm.invalid" class="btn btn-primary my-red-background" type="submit">Register</button>
        </div>
      </div>
    </form>
  </div>
</div>
<div *ngIf="consultantSelected" class="row mt-5">
  <div class="col-5 offset-4">
    <form (ngSubmit)="modify()" [formGroup]="consultantEditForm">
      <div class="row">
        <div class="col-2 mr-1">
          <label>Name</label>
        </div>
        <div class="col-6">
          <input formControlName="name">
        </div>
      </div>
      <div class="my-text-yellow" *ngIf="nameEditCtrl.dirty && nameEditCtrl.hasError('required')"><strong>Consultant name is required</strong></div>
      <div class="my-text-yellow" *ngIf="nameEditCtrl.dirty && nameEditCtrl.hasError('minlength')"><strong>Consultant name can't be less than 3 characters</strong></div>
      <div class="my-text-yellow" *ngIf="nameEditCtrl.dirty && nameEditCtrl.hasError('maxlength')"><strong>Consultant name can't be more than 20 characters</strong></div>
      <div class="row">
        <div class="col-2 mr-1">
          <label>Lastname</label>
        </div>
        <div class="col-6">
          <input formControlName="lastName">
        </div>
      </div>
      <div class="my-text-yellow" *ngIf="lastNameEditCtrl.dirty && lastNameEditCtrl.hasError('required')"><strong>Lastname is required</strong></div>
      <div class="my-text-yellow" *ngIf="lastNameEditCtrl.dirty && lastNameEditCtrl.hasError('minlength')"><strong>Lastname can't be less than 3 characters</strong></div>
      <div class="my-text-yellow" *ngIf="lastNameEditCtrl.dirty && lastNameEditCtrl.hasError('maxlength')"><strong>Lastname can't be more than 20 characters</strong></div>
      <div class="row">
        <div class="col-2 mr-1">
          <label>Description</label>
        </div>
        <div class="col-6">
          <textarea formControlName="description"></textarea>
        </div>
      </div>
      <div class="my-text-yellow" *ngIf="descriptionEditCtrl.dirty && descriptionEditCtrl.hasError('required')"><strong>Description is required</strong></div>
      <div class="my-text-yellow" *ngIf="descriptionEditCtrl.dirty && descriptionEditCtrl.hasError('maxlength')"><strong>Description can't be more than 250 characters</strong></div>
      <div class="row mt-3 mb-3">
        <div class="col-4 offset-4">
          <button [disabled]="consultantEditForm.invalid" class="btn btn-primary my-red-background" type="submit">Modify</button>
        </div>
      </div>
    </form>
  </div>
</div>
